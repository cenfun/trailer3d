<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <meta name="apple-mobile-web-app-title" content="portfolio-treegrid">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <title>TreeGrid Demo</title>
    <script src="../node_modules/stats.js/build/stats.js"></script>
    <!--
    <script src="../node_modules/three/build/three.js"></script>
    -->
    <script src="../build/trailer3d.js"></script>
    <style>
        html,
        body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }

        .container {
            width: 100%;
            height: 100%;
        }

        .stats {
            left: auto !important;
            right: 0px;
        }
    </style>
</head>

<body>
    <div class="container"></div>
</body>
<script id="vs" type="x-shader/x-vertex">

    varying vec2 vUv; void main() { vUv = uv; gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 ); }

</script>

<script id="fs" type="x-shader/x-fragment">

    uniform sampler2D map; uniform vec3 fogColor; uniform float fogNear; uniform float fogFar; varying vec2 vUv; void main() { float depth = gl_FragCoord.z / gl_FragCoord.w; float fogFactor = smoothstep( fogNear, fogFar, depth ); gl_FragColor = texture2D( map, vUv ); gl_FragColor.w *= pow( gl_FragCoord.z, 20.0 ); gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor ); }

</script>
<script type="text/javascript">
    'use strict';

    (function() {
        'use strict';

        var stats = new Stats();
        stats.showPanel(1);
        stats.dom.className = "stats";
        document.body.appendChild(stats.dom);

        var story = [{
            delay: 0,
            duration: 1000,
            content: "Trailer3D",
            type: "text"
        }, {
            delay: 1000,
            duration: 1000,
            content: "Welcome",
            type: "text"
        }, {
            delay: 100,
            duration: 1000,
            content: "To",
            type: "text"
        }, {
            delay: 100,
            duration: 1000,
            content: "Trailer3D",
            type: "text"
        }];

        story.length = 1;

        var container = document.querySelector(".container");
        var trailer = new window.Trailer3D(container);
        trailer.bind("onRenderStart", function() {
            stats.begin();
        }).bind("onRenderComplete", function() {
            stats.end();
        });


        trailer.start(story);

        window.addEventListener('click', function() {
            if (trailer.completed) {
                trailer.start(story);
            }
        });

        window.addEventListener('resize', function() {
            trailer.resize();
        });

    })();
</script>

</html>